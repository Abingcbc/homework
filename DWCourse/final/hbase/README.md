# HBase README

## Lab1

首先，我们看到处理好的数据后的最开始的反应就是分别建立电影和评论这两张表。

由于 HBase 中存储是类似 Key-Value 格式，所以对于每个数据列名都要存储一遍，所以我们尽量在保持列名可读性的基础上减少列名的长度。这不仅仅对存储空间进行了优化，也对查询性能有所提升，因为这样每次读取相同的块就可以加载更多的条数。

同时，因为 HBase 中是根据列族来划分文件进行存储的，所以如果一张表有太多列族，可能会导致查询时要加载多个文件。这里我们对逻辑上进行简化，就只设置一个列族。

这里不得不提一下，由于 HBase 存储是按照列式存储的，所以空数据是不占存储空间的，非常适合稀疏数据。之前 ETL 过程筛选掉的电影属性，如果存储在 HBase 中，对性能是没有影响的。但为了控制实验条件，与其他数据库进行对比，HBase 中还是不存储那些过于稀疏的数据。



## Lab2

Lab1 中 HBase 的表与传统的关系型数据库其实区别不是很大，有很多 HBase 特有的性质并没有利用起来。

HBase 与传统关系型数据最大的区别就在于以 RowKey 按顺序存储列。在 HBase 中，每一个 cell 都是以 Key-Value 的形式存储在 HDFS 上的，从左到右，查询的性能依次减弱，查询时筛选的能力也依次减弱，这就意味着，查询相同的一条记录，所限定的条件所在维度不同，读入内存的数据块的个数会有显著的差别。所以，我们可以将想要筛选的条件尽量向前移来提高查询性能。

我们既然知道了前移属性维度可以提高性能，那么我们之前设计的表就存在很大问题了。在表的设计中，很显然有两种设计，一种是高表，另一种是宽表。HBase 显然适合高表。除了刚刚提到的行健可以提升查询性能外，还有一个原因就是 HBase 只能按行分片。

LSM树 balabalabalabala

